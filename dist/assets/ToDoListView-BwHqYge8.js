import{r as m,a as B,o as a,c as l,b as _,w as $,v as w,d as N,F as k,e as U,f as C,n as y,t as D,g as h,h as F,i as x}from"./index-BQor-stG.js";const K={class:"add_block"},M={__name:"AddTodo",emits:["addTodo"],setup(f,{emit:s}){const i=m(""),T=m(0),c=s,u=function(){if(i.value!=""){T.value+=1;const p={id:T.value,text:i.value,temptext:i.value,status:!1,edit:!1};c("addTodo",p),i.value=""}};return(p,r)=>{const o=B("focus");return a(),l(k,null,[r[1]||(r[1]=_("h1",{style:{"border-bottom":"1px dotted"}},"To Do List",-1)),r[2]||(r[2]=_("br",null,null,-1)),_("div",K,[$(_("input",{onKeyup:N(u,["enter"]),"onUpdate:modelValue":r[0]||(r[0]=e=>i.value=e),type:"text",placeholder:"請輸入文字"},null,544),[[o],[w,i.value]]),_("button",{onClick:u},"加入")])],64)}}},O={class:"nav_block"},z=["onClick"],j={key:0},q=["onDblclick","onDragstart","onDragover"],G=["onClick"],H=["onClick"],I=["onUpdate:modelValue"],J={key:4},P=["onClick"],Q=["onClick"],R=["onClick"],W={key:1,class:"todo_item"},X={__name:"TodoList",props:{todos:{type:Array}},emits:["deleteTodo","changeTodo","editTodo","cancleTodo","saveTodo"],setup(f,{emit:s}){const i=m("all"),T=m([{name:"全部",value:"all"},{name:"進行中",value:"now"},{name:"已完成",value:"pass"}]),c=f,u=s,p=U(function(){switch(i.value){case"all":return c.todos.filter(n=>!0);case"now":return c.todos.filter(n=>!n.status);case"pass":return c.todos.filter(n=>n.status);default:return c.todos}}),r=n=>{u("deleteTodo",n)},o=n=>{u("changeTodo",n)},e=n=>{u("editTodo",n)},V=n=>{u("cancleTodo",n)},A=n=>{u("cancleTodo",n)},b=m(),g=m();function E(n,v){b.value=v-1}function L(n,v){g.value=v-1}function S(n){const v=c.todos[b.value];c.todos[b.value]=c.todos[g.value],c.todos[g.value]=v}return(n,v)=>(a(),l(k,null,[_("div",O,[(a(!0),l(k,null,C(T.value,t=>(a(),l("button",{class:y({active:i.value==t.value}),onClick:d=>i.value=t.value},D(t.name),11,z))),256))]),p.value.length>0?(a(),l("ul",j,[(a(!0),l(k,null,C(p.value,t=>(a(),l("li",{key:t.id,onDblclick:d=>e(t),draggable:"true",onDragstart:d=>E(d,t.id),onDragover:h(d=>L(d,t.id),["prevent"]),onDragend:v[0]||(v[0]=d=>S())},[t.status?(a(),l("button",{key:0,onClick:h(d=>o(t.id),["stop"]),class:"btn_finish"},"✔",8,G)):(a(),l(k,{key:1},[t.edit?F("",!0):(a(),l("button",{key:0,onClick:h(d=>o(t.id),["stop"]),class:"btn_check"},"☐",8,H))],64)),t.edit?$((a(),l("input",{key:2,type:"text","onUpdate:modelValue":d=>t.temptext=d},null,8,I)),[[w,t.temptext]]):(a(),l("label",{key:3,class:y({"line-through":t.status})},D(t.text),3)),t.edit?(a(),l("span",J,[_("button",{onClick:h(d=>A(t.id),["stop"]),class:"btn_save"},"✔",8,P),_("button",{onClick:h(d=>V(t.id),["stop"]),class:"btn_cancle"},"✘",8,Q)])):(a(),l("button",{key:5,onClick:h(d=>r(t.id),["stop"]),class:"btn_delete"},"✘",8,R))],40,q))),128))])):(a(),l("ul",W,v[1]||(v[1]=[_("li",null,"沒有資料",-1)])))],64))}},Y={class:"todolist"},Z={class:"todo_wrapper"},te={__name:"ToDoListView",setup(f){const s=m([]),i=o=>{s.value.push(o)},T=o=>{s.value=s.value.filter(e=>e.id!==o)},c=o=>{s.value=s.value.map(e=>e.id===o?{...e,status:!e.status}:e)},u=o=>{!o.edit&&!o.status&&(s.value=s.value.map(e=>e.id===o.id?{...e,edit:!e.edit}:e))},p=o=>{s.value=s.value.map(e=>e.id===o?{...e,temptext:e.text,edit:!e.edit}:e)},r=o=>{s.value=s.value.map(e=>e.id===o?{...e,text:e.temptext,edit:!e.edit}:e)};return(o,e)=>(a(),l("div",Y,[_("div",Z,[x(M,{onAddTodo:i}),x(X,{todos:s.value,onDeleteTodo:T,onChangeTodo:c,onEditTodo:u,onCancleTodo:p,onSaveTodo:r},null,8,["todos"])])]))}};export{te as default};
